package go_fedex_restful_api_wrapper

import (
	"encoding/json"
	"fmt"
	"testing"
)

func Test_Authorization(t *testing.T) {

	// Testing
	var clientId, clientSecret = "l775dddff0953f4d4aa29aa9b30e68d24e", "dd4b25024bf3467a93606b1c57bf8d3e"

	authorization, err := Authorization(clientId, clientSecret)
	if err != nil {
		fmt.Println("ERROR: ", err.Error())
		return
	}
	fmt.Println("Token:")
	fmt.Println(string(authorization))
}

func TestTokenSt(t *testing.T) {
	respBody := `{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzY29wZSI6WyJDWFMtVFAiXSwiUGF5bG9hZCI6eyJjbGllbnRJZGVudGl0eSI6eyJjbGllbnRLZXkiOiJsNzc1ZGRkZmYwOTUzZjRkNGFhMjlhYTliMzBlNjhkMjRlIn0sImF1dGhlbnRpY2F0aW9uUmVhbG0iOiJDTUFDIiwiYWRkaXRpb25hbElkZW50aXR5Ijp7InRpbWVTdGFtcCI6IjIwLUZlYi0yMDI1IDAxOjExOjIzIEVTVCIsImdyYW50X3R5cGUiOiJjbGllbnRfY3JlZGVudGlhbHMiLCJhcGltb2RlIjoiU2FuZGJveCIsImN4c0lzcyI6Imh0dHBzOi8vY3hzYXV0aHNlcnZlci1zdGFnaW5nLmFwcC5wYWFzLmZlZGV4LmNvbS90b2tlbi9vYXV0aDIifSwicGVyc29uYVR5cGUiOiJEaXJlY3RJbnRlZ3JhdG9yX0IyQiJ9LCJleHAiOjE3NDAwMzU0ODMsImp0aSI6IjFmMDcxMTE1LTI4YTItNGY4ZS1iZjA2LWUxNDk5ZWE0MTEwMyJ9.tMLUcQotm6QhtxSb3Pl4T8fj3dkzue7ZuuBLIFDR4V2zucoS6lghW1PoaTZjDDxAj-vnuhF-pJNkBilKhMfaXoi96T7i8F7IYeroXXl_bkVzUXjRjym_zBOChs6Hb_zKy_tZt27YUm5l6m4WR1fpscGbbTm730ecx7-_7CIBzI-y2Qecr8eXo60JM1LivMFgHRQK_iPnGFdRFM8bpaV6lfM6RRGskM91_AWiO_b9ZMl8iYBX3moEqa3t4z1cbJbxec9lL3rlBS9br8lOdMkXWH41dgQdT3aiP5rwforTPk_r1vDDxAYAXOq045Gy8XTarQnL6VZ0WveORQJvZlmisRmsYedQSWvjAnClS8CyELdro2Ujm8jQEGDFL7LTmO_fzxrGXusgHwdJ7b-u-eyejAckVxQ3SOn78aZVwYSQzYJhExEzxbUe0Yn6oO8ALY_sbUjGlOAl89gaAtlqP5XsyCbiSUMHP4pfRRrT9fYX07U5QRPi4QTevHtoq3lJaEyhnEDydnSKG1GeeqGmP0YtlXOXTRm38AYmSuGJZhdQITESubn0lhBuHEVJnLYZp72k5H1DZEcY7--QwDZNtyNvriGUL1LcnXL-wxabAwgXwblDilcV9dqq6-87xwg-haZU7l4YqyLVpQ-yvSwMAxu_EkaQ9hlz9kQyGnjrC2LrYrY","token_type":"bearer","expires_in":3599,"scope":"CXS-TP"}`
	// {"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzY29wZSI6WyJDWFMtVFAiXSwiUGF5bG9hZCI6eyJjbGllbnRJZGVudGl0eSI6eyJjbGllbnRLZXkiOiJsNzc1ZGRkZmYwOTUzZjRkNGFhMjlhYTliMzBlNjhkMjRlIn0sImF1dGhlbnRpY2F0aW9uUmVhbG0iOiJDTUFDIiwiYWRkaXRpb25hbElkZW50aXR5Ijp7InRpbWVTdGFtcCI6IjIwLUZlYi0yMDI1IDAxOjI3OjE1IEVTVCIsImdyYW50X3R5cGUiOiJjbGllbnRfY3JlZGVudGlhbHMiLCJhcGltb2RlIjoiU2FuZGJveCIsImN4c0lzcyI6Imh0dHBzOi8vY3hzYXV0aHNlcnZlci1zdGFnaW5nLmFwcC5wYWFzLmZlZGV4LmNvbS90b2tlbi9vYXV0aDIifSwicGVyc29uYVR5cGUiOiJEaXJlY3RJbnRlZ3JhdG9yX0IyQiJ9LCJleHAiOjE3NDAwMzY0MzUsImp0aSI6ImYwNjgyYzUzLTczODctNDYyYi05NWY4LWZkNjE2YWQ4ZWYzNCJ9.yfzxEHbFORTWPhwz6GMHkbb9vAF1NPhMwd6_MeeWUh_dsa2FwAIZKLZAYKHVfV2eBxZEG8TJsN6LMb_M4ocDgqZb4BYjxF2d7Y3_rlzlt7d8IHsP2iMKOh7tBfp5h9el--qIz_q2q1o2l79Anpe0HXFt8LoFY9Bzf8D5MF3B5El6ZF4qX2fKchurhN6yOq2QFRHYdYugbXMNyTHj6SUlX_qUYZG1gpNq-84Ls6jiCHkvhcWAIJg2nH3gO44elRVdvnu0FbctA50HuwRUCp_yrY-TePAiWAcS9gV3nAOy7P4mXusR8m6hub6gT6NxYRIbWhcarljWZLzAkGqXJvDH4n6sLCFMcrfJJghqao34Lkn9z_Q_6R_Kd1qP_8LWMCY_7AQCeWcKrVlJBMO_y7zs4hgrpAhYqzItxulugmUtNmT8rCz1tppInh2Li1BTXFlWqeRlpYS5WWBoGhymczhLKjYpD6fYGAFDj_c4pDBTYpsqVSMZosC8cIbn6w5LJBzIeOFge_gm49H7nOzPdLe3tilNHHZW_ezvQOwV8Ju8uWQ0HoxnLUOW3P0o81PEbT-4I1Lm5asNTOPU9XzqdaOXtVeuKbeeOVZXWAx405NxsFeIQqJPMEsVKL7Hpa0eNTVfOwC846jYHbb0kmsfdv7qPCO0F3CO4xi3rQ8gXNNUNiY","token_type":"bearer","expires_in":3599,"scope":"CXS-TP"}
	fedExTokenSt := &FedExTokenSt{
		AccessToken: "",
		TokenType:   "",
		ExpiresIn:   0,
		Scope:       "",
	}
	err := json.Unmarshal([]byte(respBody), fedExTokenSt)
	if err != nil {
		fmt.Println(err.Error())
		return
	}
	fmt.Printf("%#v", fedExTokenSt)
	fmt.Println(fedExTokenSt.AccessToken)
}
